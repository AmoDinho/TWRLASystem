@model IEnumerable<TRWLASystemMaster.Models.DB.RSVP_Event>

@{
    ViewBag.Title = "StudentDashboard";
    Layout = "~/Views/Shared/StudentLoggedInView.cshtml";
}
@*<head>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
            $(".set-width-btn").click(function(){
            var newWidth = $("50%").val();
            $(".function").width(newWidth);
        });
    });
        </script>
    </head>*@

<div class="jumbotron" style="margin-bottom:50px;">
    <h1> @ViewBag.Name's Dashboard</h1>
    <div class="quoteform"></div>
    <div class="quote1form"></div>
    <div class="quote2form"></div>
</div>

<div class="row">
    <div class="col-md-10">
        @if (TempData["NoEvent"] != null)
        {
            @TempData["NoEvent"];
        }
        @using (Html.BeginForm())
        {

            string func = ViewBag.Function.ToString("###");
            string lec = ViewBag.Lecture.ToString("###");
            string com = ViewBag.Com.ToString("###");
            string gen = ViewBag.Gen.ToString("###");

            <h2> My Progress </h2>
            <div class="form-inline">
                @if (func == "")
                {
                    <div data-toggle="tooltip" title="I have atteded 0 functions" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#4717f6; width:7%; height:30px; color:white;"><i  style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-microphone" aria-hidden="true"></i>0%</div>
                }
                @if (func != "")
                {
                <div data-toggle="tooltip" title="I have atteded @func% of the functions I need to attend" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#4717f6; width:@func%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-microphone" aria-hidden="true"></i>@func%</div>
                }
            </div>

            <div class="form-inline">
                @if (lec == "")
                {
                    <div data-toggle="tooltip" title="I have atteded 0 lectures" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#ffdb58; width:7%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-bookmark" aria-hidden="true"></i>0%</div>
                }
                @if (lec != "")
                {
                <div data-toggle="tooltip" title="I have atteded @lec% of the lectures I need to attend" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#ffdb58; width:@lec%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-bookmark" aria-hidden="true"></i>@lec%</div>
                }
            </div>

            <div class="form-inline">
                @if (com == "")
                {
                    <div data-toggle="tooltip" title="I have atteded 0 community engagements" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#a239ca; width:7%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-globe" aria-hidden="true"></i>0%</div>
                }
                @if (com != "")
                {
                <div data-toggle="tooltip" title="I have atteded @com% of the communiy engagements I need to attend" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#a239ca; width:@com%; height:30px; color:white;"><i style="margin-right:5px; color:white;" class="fa fa-globe" aria-hidden="true"></i>@com%</div>
                }
            </div>

            <div class="form-inline">
                @if (gen == "")
                {
                    <div data-toggle="tooltip" title="I have atteded 0 general events" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#778899; width:7%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-asterisk" aria-hidden="true"></i>0%</div>
                }
                @if (gen != "")
                {
                <div data-toggle="tooltip" title="I have atteded @gen% of the general events I need to attend" role="progressbar" class="form-group" style="border-radius:3px; margin-bottom: 10px; background-color:#778899; width:@gen%; height:30px; color:white;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-asterisk" aria-hidden="true"></i>@gen%</div>
                }
            </div>
        }

    </div>
</div>

<div class="row" @*id="showMe" style="display:none;*@>
    <div class="col-md-6 form-inline" style="margin-bottom:10px; height:500px; overflow-y:auto;">
        <h2 style="text-align:left; margin-bottom:30px;">My upcoming events</h2>
        @foreach (var item in Model.Where(p => p.Attended == null))
        {
            string cssClass = "col-md-5-Function";

            if (item.FunctionID != null)
            {
                cssClass = "col-md-5-Function";
            }
            else if (item.ComEngID != null)
            {
                cssClass = "col-md-5-Com";
            }
            else if (item.LectureID != null)
            {
                cssClass = "col-md-5-Lecture";
            }
            else if (item.GenID != null)
            {
                cssClass = "col-md-5-Gen";
            }
            <div class="@cssClass form-group" style="margin-top:10px;">
                <h4 data-toggle="tooltip" title="@Html.DisplayFor(modelItem => item.FunctionEvent.Function_Date, "{0:MMMM/dd/yyyy}")
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_Date, "{0:MMMM/dd/yyyy}")
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_Date)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_Date)
                    @Html.DisplayFor(modelItem => item.FunctionEvent.Function_StartTime)
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_StartTime)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEnge_StartTime)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_StartTime) to @Html.DisplayFor(modelItem => item.FunctionEvent.Function_EndTime)
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_EndTime)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_EndTime)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_EndTime)
                    @Html.DisplayFor(modelItem => item.FunctionEvent.Venue.Venue_Name)
                    @Html.DisplayFor(modelItem => item.Lecture.Residence.Res_Name)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.Venue.Venue_Name)" style="z-index:100; position:relative; background-color:transparent; color:white; text-align:center;">

                    @Html.DisplayFor(modelItem => item.FunctionEvent.Function_Name)
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_Name)
                                        @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_Name)
                                        @Html.DisplayFor(modelItem => item.GenEvent.Gen_Name)
                </h4>
            </div>
        }
    </div>
    <div class="col-md-6 form-inline" style="margin-bottom:10px; height:500px; overflow-y:auto;">
        <h2 style="text-align:left; margin-bottom:30px;">Events I have attended</h2>
        @foreach (var item in Model.Where(p => p.Attended != null))
        {
            string cssClass = "col-md-5-Function";

            if (item.FunctionID != null)
            {
                cssClass = "col-md-5-Function";
            }
            else if (item.ComEngID != null)
            {
                cssClass = "col-md-5-Com";
            }
            else if (item.LectureID != null)
            {
                cssClass = "col-md-5-Lecture";
            }
            else if (item.GenID != null)
            {
                cssClass = "col-md-5-Gen";
            }
            <div class="@cssClass form-group" style="margin-top:10px;">
                <h4 data-toggle="tooltip" title="@Html.DisplayFor(modelItem => item.FunctionEvent.Function_Date, "{0:MMMM/dd/yyyy}")
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_Date, "{0:MMMM/dd/yyyy}")
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_Date)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_Date)
                    @Html.DisplayFor(modelItem => item.FunctionEvent.Function_StartTime)
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_StartTime)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEnge_StartTime)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_StartTime) to @Html.DisplayFor(modelItem => item.FunctionEvent.Function_EndTime)
                    @Html.DisplayFor(modelItem => item.Lecture.Lecture_EndTime)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_EndTime)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_EndTime)
                    @Html.DisplayFor(modelItem => item.FunctionEvent.Venue.Venue_Name)
                    @Html.DisplayFor(modelItem => item.Lecture.Residence.Res_Name)
                    @Html.DisplayFor(modelItem => item.ComEngEvent.Venue.Venue_Name)" style="z-index:100; position:relative; background-color:transparent; color:white; text-align:center;">

                    @Html.DisplayFor(modelItem => item.FunctionEvent.Function_Name)
                    @if (item.LectureID != null)
                    {
                        @Html.DisplayFor(modelItem => item.Lecture.Lecture_Name) <a href="@Url.Action("WriteReview", "TRWLASchedules", new { id = item.rsvpID })" data-toggle="tooltip" title="Write a review" data-placement="bottom" style="margin-left:20px;"><i style="margin-left:5px; margin-right:5px; color:white;" class="fa fa-star" aria-hidden="true"></i></a>
                    }
                    
                    @Html.DisplayFor(modelItem => item.ComEngEvent.ComEng_Name)
                    @Html.DisplayFor(modelItem => item.GenEvent.Gen_Name)
                    
                </h4>
            </div>
        }
    </div>

</div>
<div style="float:right; margin-bottom:20px; margin-top:50px;" data-toggle="tooltip" title="Return to the Main Menu">
    <button  type="button" style="float:right;" class="btn" onclick="location.href='@Url.Action("StudentMainMenu", "TRWLASchedules")'"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
</div>