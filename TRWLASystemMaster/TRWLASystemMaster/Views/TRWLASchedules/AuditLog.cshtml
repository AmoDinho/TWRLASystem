@model IEnumerable<TRWLASystemMaster.Models.DB.AuditLog>

@{
    ViewBag.Title = "AuditLog";
    Layout = "~/Views/Shared/VolunteerLoggedInPage.cshtml";
}

<div class="jumbotron" style="margin-bottom:30px;">
    <h1>Audit Log</h1>
    <div class="quoteform"></div>
    <div class="quote1form"></div>
    <div class="quote2form"></div>
</div>

<div class="form-inline">
    <h2>Search Audit Log</h2>
    <div class="form-group">
        <select id="UrlList" onchange="doNavigate()" class="form-control" style="margin-bottom:20px; width:280px;">
            <option value="">Filter by...</option>
            <option value="@Url.Action("AuditLog", "TRWLASchedules", new { all = ViewBag.SurnameSortParm })'">Show All</option>
            <option value="@Url.Action("AuditLog", "TRWLASchedules", new { Create = ViewBag.SurnameSortParm })'">Create</option>
            <option value="@Url.Action("AuditLog", "TRWLASchedules", new { Update = ViewBag.SurnameSortParm })'">Update</option>
            <option value="@Url.Action("AuditLog", "TRWLASchedules", new { Delete = ViewBag.SurnameSortParm })'">Delete</option>
        </select>
    </div>
</div>

<script>
    function doNavigate() {
        window.location.href = document.getElementById("UrlList").value;
    }
</script>

<div style="height:500px; overflow-y:auto;">
    <table class="table" style="height:500px; overflow-y:auto;">
        <tr>
            <th>
                Type of Transaction
            </th>
            <th>
                Affected Table
            </th>
            <th>
                Date of Transaction
            </th>
            <th>
                UserID
            </th>
            <th>
                User Name
            </th>
            <th>
                User Surname
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.OrderByDescending(p => p.DateDone))
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.TypeTran)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TableAff)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateDone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SYSUserProfile.SYSUserProfileID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SYSUserProfile.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SYSUserProfile.LastName)
                </td>
            </tr>
        }

    </table>
</div>

<div class="form-inline" style="float:right; margin-bottom:20px; margin-top:10px;">
    <div class="form-group">
        <button data-toggle="tooltip" title="Return to the Main Menu" type="button" class="btn" onclick="location.href='@Url.Action("Index", "TRWLASchedules")'">Return</button>
    </div>
</div>

